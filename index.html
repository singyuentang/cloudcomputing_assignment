<html>
<head>
</head>
<style>
.header{
	background-color: #ffffff;
	height: 100px;
	width: 100%;
}
.content{
	background-color: #d6e0f5;
	height: 100%;
	width: 100%;
}

</style>
<link rel="stylesheet" href = "http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
<script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>
<script src="https://cdn.firebase.com/libs/angularfire/0.8.0/angularfire.min.js"></script>


<body ng-app="myApp" ng-controller="thisController">

<button ng-click="loginGoogle()" alt="Login">Click Me</button>
<p>User Name : {{myName}}</p>
<p>Provider : {{myProvider}}</p>
<br/>
<div ng-show="loginStatus">
	<table border="1" style="width:70%">
	<tr>
		<td>Travel Date</td>
		<td>Start Time</td>
		<td>Origin</td>
		<td>End Time</td>
		<td>Destination</td>
	</tr>
	</table>
</div>
<script>
	
	var myApp = angular.module("myApp", ["firebase"]);
	myApp.controller('thisController', ['$scope', '$firebase', 
    
	function($scope, $firebase) {
    $scope.newuser = {};
    
	// Here is where you update your Firebase URL. 
	var ref = new Firebase("https://cloud-assignment.firebaseio.com/");
	window.alert("load");
	$scope.loginGoogle = function(){
		ref.authWithOAuthRedirect("google", function (error, authData){
			window.alert(authData);
			if(error){
				
				console.log("Login Failed", error);
			}else{
				$scope.name = authData.uid;
				console.log("Login successful with payload", authData);
			}
		});
	};
	
	/*
	ref.onAuth(authenticationCallBack);
	window.alert("load");
	
	function authenticationCallBack(authData){
		window.alert(authData.uid);
		
		if (authData.uid !== null) {
			$scope.myName = authData.uid;
			$scope.myProvider = authData.provider;
		}
	}
	*/
	
    
    	
	//$scope.users = $firebase(ref.child("feedback")).$asArray(); 
    //$scope.edit = false;
    //$scope.error = false;
    //$scope.incomplete = false;  
    
    $scope.currentUser = null;
    
	//Check to see if the users is already logged in to Firebase and update currentUser if yes. 
    /*var authData = ref.getAuth();
	  if (authData && authData!={}) {
		  $scope.currentUser = $firebase(ref.child("user").child(authData.uid)).$asObject();
	  } else {
		  console.log("User is logged out");
	  }
	*/
	
	}]);
</script>

</body>
</html>
